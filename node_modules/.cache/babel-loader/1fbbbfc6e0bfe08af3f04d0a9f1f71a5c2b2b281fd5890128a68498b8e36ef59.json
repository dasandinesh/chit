{"ast":null,"code":"import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{customer_get_url,customer_add_url}from\"./url/url\";import\"./coustomer.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Coustomer=()=>{const[cuslist,setCuslist]=useState([]);const[name,setName]=useState(\"\");const[phone,setPhone]=useState(\"\");const[pending_flag,setPending_flag]=useState(\"\");const[showModal,setShowModal]=useState(false);// State to control modal visibility\nconst handleSubmit=async e=>{e.preventDefault();await addCusPost();setCuslist([]);// Clear existing customer list to force re-fetch\nsetShowModal(false);// Close the modal after adding a customer\n};const addCusPost=async()=>{const data={name:name,phone:phone,pending_flag:pending_flag};// Make API call to add customer\ntry{await axios.post(customer_add_url,data);}catch(error){console.error(\"Error adding customer:\",error);}cusGetList();};const cusGetList=async()=>{try{const res=await axios.get(customer_get_url);setCuslist(res.data);}catch(error){console.error(\"Error fetching customer list:\",error);}const data={name:\"\",phone:\"\",pending_flag:\"\"};};useEffect(()=>{cusGetList();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(true),children:\"Add Customer\"}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:()=>setShowModal(false),children:\"\\xD7\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:name,onChange:e=>setName(e.target.value),placeholder:\"name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"phone\",required:true,value:phone,onChange:e=>setPhone(e.target.value),placeholder:\"phone\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Pending Flag:\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:e=>setPending_flag(e.target.checked)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]})]})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pending Flag\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Views\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cuslist.map((customer,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:customer.name}),/*#__PURE__*/_jsx(\"td\",{children:customer.phone}),/*#__PURE__*/_jsx(\"td\",{children:customer.pending_flag?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/views/\".concat(customer._id),children:\"Views\"})})]},index))})]})]});};export default Coustomer;","map":{"version":3,"names":["axios","React","useEffect","useState","customer_get_url","customer_add_url","jsx","_jsx","jsxs","_jsxs","Coustomer","cuslist","setCuslist","name","setName","phone","setPhone","pending_flag","setPending_flag","showModal","setShowModal","handleSubmit","e","preventDefault","addCusPost","data","post","error","console","cusGetList","res","get","children","onClick","className","onSubmit","type","required","value","onChange","target","placeholder","checked","map","customer","index","href","concat","_id"],"sources":["C:/Users/ghost/react/cite/src/components/coustomer.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { customer_get_url, customer_add_url } from \"./url/url\";\r\nimport \"./coustomer.css\";\r\n\r\nconst Coustomer = () => {\r\n  const [cuslist, setCuslist] = useState([]);\r\n  const [name, setName] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [pending_flag, setPending_flag] = useState(\"\");\r\n  const [showModal, setShowModal] = useState(false); // State to control modal visibility\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await addCusPost();\r\n    setCuslist([]); // Clear existing customer list to force re-fetch\r\n    setShowModal(false); // Close the modal after adding a customer\r\n  };\r\n\r\n  const addCusPost = async () => {\r\n    const data = {\r\n      name: name,\r\n      phone: phone,\r\n      pending_flag: pending_flag,\r\n    };\r\n    // Make API call to add customer\r\n    try {\r\n      await axios.post(customer_add_url, data);\r\n    } catch (error) {\r\n      console.error(\"Error adding customer:\", error);\r\n    }\r\n    cusGetList();\r\n  };\r\n\r\n  const cusGetList = async () => {\r\n    try {\r\n      const res = await axios.get(customer_get_url);\r\n      setCuslist(res.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching customer list:\", error);\r\n    }\r\n    const data = {\r\n      name: \"\",\r\n      phone: \"\",\r\n      pending_flag: \"\",\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    cusGetList();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={() => setShowModal(true)}>Add Customer</button>\r\n      {showModal && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <span className=\"close\" onClick={() => setShowModal(false)}>\r\n              &times;\r\n            </span>\r\n            <form onSubmit={handleSubmit}>\r\n              <input\r\n                type=\"text\"\r\n                required\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"name\"\r\n              />\r\n              <input\r\n                type=\"phone\"\r\n                required\r\n                value={phone}\r\n                onChange={(e) => setPhone(e.target.value)}\r\n                placeholder=\"phone\"\r\n              />\r\n              <label>\r\n                Pending Flag:\r\n                <input\r\n                  type=\"checkbox\"\r\n                  onChange={(e) => setPending_flag(e.target.checked)}\r\n                />\r\n              </label>\r\n              <button type=\"submit\">Add</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>S.No</th>\r\n            <th>Name</th>\r\n            <th>Phone</th>\r\n            <th>Pending Flag</th>\r\n            <th>Views</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {cuslist.map((customer, index) => (\r\n            <tr key={index}>\r\n              <td>{index + 1}</td>\r\n              <td>{customer.name}</td>\r\n              <td>{customer.phone}</td>\r\n              <td>{customer.pending_flag ? \"Yes\" : \"No\"}</td>\r\n              <td>\r\n                <a href={`/views/${customer._id}`}>Views</a>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Coustomer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}